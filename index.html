<!DOCTYPE html>
<html>
<head>
    <title>Plataforma de Trabalho</title>
    <style>
        .tarefa {
            margin-bottom: 10px;
        }

        .mensagem {
            margin-bottom: 10px;
        }

        .remetente {
            font-weight: bold;
            margin-right: 5px;
        }

        .texto {
            color: #555555;
        }
    </style>
</head>
<body>
    <h1>Plataforma de Trabalho</h1>
    <h2>Bem-vindo, <span id="nome-usuario"></span>!</h2>
    <hr>

    <h3>Contador de Tempo de Trabalho</h3>
    <p>Tempo de trabalho: <span id="tempo-trabalho">00:00:00</span></p>
    <button onclick="iniciarContagem()">Iniciar</button>
    <button onclick="pausarContagem()">Pausar</button>
    <button onclick="retomarContagem()">Retomar</button>
    <hr>

    <h3>Adicionar Tarefas</h3>
    <input type="text" id="descricao-tarefa" placeholder="Descrição da tarefa">
    <button onclick="adicionarTarefa()">Adicionar</button>
    <div id="lista-tarefas"></div>
    <hr>

    <h3>Chat</h3>
    <div id="chat"></div>
    <input type="text" id="mensagem-input" placeholder="Digite uma mensagem">
    <button onclick="enviarMensagem()">Enviar</button>

    <script>
        var usuarios = [
            { usuario: "admin", senha: "1234" },
            { usuario: "david", senha: "1234" },
            { usuario: "joao", senha: "1234" }
        ];

        var usuarioAtual = "";
        var inicioTrabalho = null;
        var inicioPausa = null;
        var tempoPausa = 0;
        var intervaloContagem = null;
        var tarefasRealizadas = [];
        var mensagensEnviadas = [];

        function login() {
            var usuarioInput = document.getElementById("usuario");
            var senhaInput = document.getElementById("senha");

            var usuario = usuarioInput.value;
            var senha = senhaInput.value;

            var credenciaisValidas = usuarios.some(function (credenciais) {
                return credenciais.usuario === usuario && credenciais.senha === senha;
            });

            if (credenciaisValidas) {
                usuarioAtual = usuario;
                atualizarNomeUsuario();
                carregarDadosUsuario();
                exibirTarefas();
                exibirMensagens();
            } else {
                alert("Credenciais inválidas. Tente novamente.");
            }

            usuarioInput.value = "";
            senhaInput.value = "";
        }

        function atualizarNomeUsuario() {
            var nomeUsuarioElement = document.getElementById("nome-usuario");
            nomeUsuarioElement.textContent = usuarioAtual;
        }

        function carregarDadosUsuario() {
            var dadosUsuario = localStorage.getItem(usuarioAtual);
            if (dadosUsuario) {
                dadosUsuario = JSON.parse(dadosUsuario);
                tarefasRealizadas = dadosUsuario.tarefas || [];
                mensagensEnviadas = dadosUsuario.mensagens || [];
            }
        }

        function salvarDadosUsuario() {
            var dadosUsuario = {
                tarefas: tarefasRealizadas,
                mensagens: mensagensEnviadas
            };
            localStorage.setItem(usuarioAtual, JSON.stringify(dadosUsuario));
        }

        function iniciarContagem() {
            inicioTrabalho = new Date().getTime();
            intervaloContagem = setInterval(atualizarTempoTrabalho, 1000);
        }

        function pausarContagem() {
            inicioPausa = new Date().getTime();
            clearInterval(intervaloContagem);
        }

        function retomarContagem() {
            if (inicioPausa) {
                tempoPausa += new Date().getTime() - inicioPausa;
                inicioPausa = null;
                intervaloContagem = setInterval(atualizarTempoTrabalho, 1000);
            }
        }

        function atualizarTempoTrabalho() {
            var tempoAtual = new Date().getTime();
            var tempoTotal = tempoAtual - inicioTrabalho - tempoPausa;
            var segundos = Math.floor((tempoTotal / 1000) % 60);
            var minutos = Math.floor((tempoTotal / (1000 * 60)) % 60);
            var horas = Math.floor(tempoTotal / (1000 * 60 * 60));
            var tempoFormatado = formatarNumero(horas) + ":" + formatarNumero(minutos) + ":" + formatarNumero(segundos);
            var tempoTrabalhoElement = document.getElementById("tempo-trabalho");
            tempoTrabalhoElement.textContent = tempoFormatado;
        }

        function formatarNumero(numero) {
            return numero < 10 ? "0" + numero : numero;
        }

        function adicionarTarefa() {
            var descricaoTarefaInput = document.getElementById("descricao-tarefa");
            var descricaoTarefa = descricaoTarefaInput.value;
            if (descricaoTarefa) {
                var novaTarefa = {
                    descricao: descricaoTarefa,
                    concluida: false
                };
                tarefasRealizadas.push(novaTarefa);
                exibirTarefas();
                descricaoTarefaInput.value = "";
                salvarDadosUsuario();
            }
        }

        function exibirTarefas() {
            var listaTarefasElement = document.getElementById("lista-tarefas");
            listaTarefasElement.innerHTML = "";

            tarefasRealizadas.forEach(function (tarefa, index) {
                var tarefaElement = document.createElement("div");
                tarefaElement.classList.add("tarefa");

                var descricaoElement = document.createElement("span");
                descricaoElement.classList.add("descricao");
                descricaoElement.textContent = tarefa.descricao;

                var concluirButton = document.createElement("button");
                concluirButton.textContent = "Concluir";
                concluirButton.onclick = function () {
                    concluirTarefa(index);
                };

                var cancelarButton = document.createElement("button");
                cancelarButton.textContent = "Cancelar";
                cancelarButton.onclick = function () {
                    cancelarTarefa(index);
                };

                tarefaElement.appendChild(descricaoElement);
                tarefaElement.appendChild(concluirButton);
                tarefaElement.appendChild(cancelarButton);

                listaTarefasElement.appendChild(tarefaElement);
            });
        }

        function concluirTarefa(index) {
            tarefasRealizadas[index].concluida = true;
            exibirTarefas();
            salvarDadosUsuario();
        }

        function cancelarTarefa(index) {
            tarefasRealizadas.splice(index, 1);
            exibirTarefas();
            salvarDadosUsuario();
        }

        function enviarMensagem() {
            var mensagemInput = document.getElementById("mensagem-input");
            var mensagem = mensagemInput.value.trim();
            if (mensagem) {
                var novaMensagem = {
                    remetente: usuarioAtual,
                    texto: mensagem
                };
                mensagensEnviadas.push(novaMensagem);
                exibirMensagens();
                mensagemInput.value = "";
                salvarDadosUsuario();
            }
        }

        function exibirMensagens() {
            var chatElement = document.getElementById("chat");
            chatElement.innerHTML = "";

            mensagensEnviadas.forEach(function (mensagem) {
                var mensagemElement = document.createElement("div");
                mensagemElement.classList.add("mensagem");

                var remetenteElement = document.createElement("span");
                remetenteElement.classList.add("remetente");
                remetenteElement.textContent = mensagem.remetente + ":";

                var textoElement = document.createElement("span");
                textoElement.classList.add("texto");
                textoElement.textContent = mensagem.texto;

                mensagemElement.appendChild(remetenteElement);
                mensagemElement.appendChild(textoElement);

                chatElement.appendChild(mensagemElement);
            });
        }
    </script>

    <h3>Login</h3>
    <input type="text" id="usuario" placeholder="Usuário">
    <input type="password" id="senha" placeholder="Senha">
    <button onclick="login()">Entrar</button>
</body>
</html>
