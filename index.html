<!DOCTYPE html>
<html>
<head>
    <title>Plataforma de Trabalho</title>
    <style>
        .hidden {
            display: none;
        }
        .tarefa {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <section id="login-section">
        <h1>Login</h1>
        <label for="username">Utilizador:</label>
        <input type="text" id="username" placeholder="Utilizador">
        <br>
        <label for="password">Password:</label>
        <input type="password" id="password" placeholder="Password">
        <br>
        <button onclick="login()">Entrar</button>
    </section>

    <section id="trabalho-section" class="hidden">
        <h1>Bem-vindo, <span id="nome-usuario"></span>!</h1>

        <div>
            <button onclick="fecharDiaTrabalho()">Fechar Dia de Trabalho</button>
        </div>

        <div>
            <h2>Contador de Tempo de Trabalho</h2>
            <p id="tempo-trabalho">Tempo de trabalho: 0h 0m 0s</p>
            <button onclick="pausarContadorTempo()">Pausar</button>
            <button onclick="retomarContadorTempo()">Retomar</button>
        </div>

        <div>
            <h2>Adicionar Tarefa</h2>
            <input type="text" id="descricao-tarefa" placeholder="Descrição da Tarefa">
            <button onclick="adicionarTarefa()">Adicionar Tarefa</button>
        </div>

        <div>
            <h2>Tarefas</h2>
            <div id="lista-tarefas"></div>
        </div>

        <div>
            <h2>Chat</h2>
            <div id="mensagens"></div>
            <input type="text" id="mensagem-input" placeholder="Escreva uma mensagem">
            <button onclick="enviarMensagem()">Enviar</button>
        </div>
    </section>

    <script>
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username === 'admin' && password === '1234') {
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('trabalho-section').classList.remove('hidden');
                document.getElementById('nome-usuario').textContent = 'Admin';
                iniciarContadorTempo();
            } else if (username === 'david' && password === '1234') {
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('trabalho-section').classList.remove('hidden');
                document.getElementById('nome-usuario').textContent = 'David';
                iniciarContadorTempo();
            } else if (username === 'joao' && password === '1234') {
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('trabalho-section').classList.remove('hidden');
                document.getElementById('nome-usuario').textContent = 'João';
                iniciarContadorTempo();
            } else {
                alert('Credenciais inválidas. Tente novamente.');
            }
        }

        function formatarTempo(tempo) {
            const horas = Math.floor(tempo / 3600);
            const minutos = Math.floor((tempo % 3600) / 60);
            const segundos = tempo % 60;
            return horas + 'h ' + minutos + 'm ' + segundos + 's';
        }

        let tempoTrabalho = 0;
        let contadorTempo;

        function iniciarContadorTempo() {
            contadorTempo = setInterval(atualizarTempoTrabalho, 1000);
        }

        function atualizarTempoTrabalho() {
            tempoTrabalho++;
            document.getElementById('tempo-trabalho').textContent = 'Tempo de trabalho: ' + formatarTempo(tempoTrabalho);
        }

        function pausarContadorTempo() {
            clearInterval(contadorTempo);
        }

        function retomarContadorTempo() {
            iniciarContadorTempo();
        }

        function adicionarTarefa() {
            const descricao = document.getElementById('descricao-tarefa').value;
            if (descricao.trim() !== '') {
                const tarefa = {
                    descricao: descricao,
                    concluida: false
                };
                adicionarTarefaLista(tarefa);
                document.getElementById('descricao-tarefa').value = '';
            }
        }

        function adicionarTarefaLista(tarefa) {
            const listaTarefas = document.getElementById('lista-tarefas');
            const tarefaElemento = document.createElement('div');
            tarefaElemento.className = 'tarefa';

            const descricaoElemento = document.createElement('span');
            descricaoElemento.className = 'descricao';
            descricaoElemento.textContent = tarefa.descricao;

            const concluidaElemento = document.createElement('button');
            concluidaElemento.textContent = 'Concluída';
            concluidaElemento.onclick = function() {
                tarefa.concluida = true;
                tarefaElemento.classList.add('concluida');
                concluidaElemento.disabled = true;
                canceladaElemento.disabled = true;
            };

            const canceladaElemento = document.createElement('button');
            canceladaElemento.textContent = 'Cancelar';
            canceladaElemento.onclick = function() {
                listaTarefas.removeChild(tarefaElemento);
            };

            tarefaElemento.appendChild(descricaoElemento);
            tarefaElemento.appendChild(concluidaElemento);
            tarefaElemento.appendChild(canceladaElemento);
            listaTarefas.appendChild(tarefaElemento);
        }

        function enviarMensagem() {
            const mensagemInput = document.getElementById('mensagem-input');
            const mensagem = mensagemInput.value;
            if (mensagem.trim() !== '') {
                const remetente = document.getElementById('nome-usuario').textContent;
                adicionarMensagemEnviada(remetente, mensagem);
                mensagemInput.value = '';
            }
        }

        function adicionarMensagemEnviada(remetente, mensagem) {
            const mensagens = document.getElementById('mensagens');
            const mensagemElemento = document.createElement('div');
            mensagemElemento.className = 'mensagem';

            const remetenteElemento = document.createElement('span');
            remetenteElemento.className = 'remetente';
            remetenteElemento.textContent = remetente + ':';

            const textoElemento = document.createElement('span');
            textoElemento.className = 'texto';
            textoElemento.textContent = mensagem;

            mensagemElemento.appendChild(remetenteElemento);
            mensagemElemento.appendChild(textoElemento);
            mensagens.appendChild(mensagemElemento);
        }

        function fecharDiaTrabalho() {
            const confirmacao = confirm('Tem certeza de que deseja fechar o dia de trabalho? Todos os dados serão limpos.');
            if (confirmacao) {
                clearInterval(contadorTempo);
                tempoTrabalho = 0;
                document.getElementById('tempo-trabalho').textContent = 'Tempo de trabalho: 0h 0m 0s';
                document.getElementById('lista-tarefas').innerHTML = '';
                document.getElementById('mensagens').innerHTML = '';
                document.getElementById('login-section').classList.remove('hidden');
                document.getElementById('trabalho-section').classList.add('hidden');
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
            }
        }
    </script>
</body>
</html>
